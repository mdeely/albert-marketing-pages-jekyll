.coursePreview {
	padding-top: $section-padding;
	padding-bottom: $section-padding;
	display: flex;
	align-items: center;
	flex-direction: column;

	.tabBar {
		margin-bottom: rem(30);
		box-shadow: none;
	}

	.coursePreview__title {
		@include fancy-title-medium;
		text-align: center;
		margin-bottom: rem(80);
	}

	.coursePreview__group-title {
		@include title-medium;
		margin-bottom: rem(40);
	}

	.coursePreview__group-description {
		margin-bottom: rem(20);
		display: none;
		text-align: center;
		padding-left: 4vw;
		padding-right: 4vw;

		&.active {
			display: block;
		}
	}

	.coursePreview__card-list {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: center;
		max-width: rem(1200);

		// max-height: 400px;
		// overflow: hidden;
		// $transitionTime: 1.5s;

		// $containerWaitDuration: $transitionTime/3.5;
		// $nextContainerChangeDuration: $transitionTime/3;
		// $containerChangeDuration: $transitionTime/2;
		// $nextElWaitDuration: $containerWaitDuration*2;
		// $elOutDuration: $containerWaitDuration;

		&:not(.active) {
			display: none;
			// max-height: 0;
			// transition: 
			// 	max-height $containerChangeDuration linear $containerWaitDuration, 
			// 	opacity 0s linear $containerWaitDuration;

			// .coursePreview__card-item {
			// 	opacity: 0;
			// 	left: rem(-100);
			// 	transition: 
			// 		left $elOutDuration ease-in-out 0s, 
			// 		opacity $elOutDuration ease-in-out 0s, 
			// 		transform .1s ease-in-out;

			// 	&:nth-child(1n) {
			// 		left: rem(-110);
			// 		transition: 
			// 			left $elOutDuration*.9 ease-in-out .04s, 
			// 			opacity $elOutDuration*.9 ease-in-out .04s, 
			// 			transform .1s ease-in-out;
			// 	}

			// 	&:nth-child(2n) {
			// 		left: rem(-120);
			// 		transition: 
			// 			left $elOutDuration*.8 ease-in-out .03s, 
			// 			opacity $elOutDuration*.8 ease-in-out .04s, 
			// 			transform .1s ease-in-out;
			// 	}

			// 	&:nth-child(2n-3) {
			// 		left: rem(-130);
			// 		transition: 
			// 			left $elOutDuration*.7 ease-in-out .02s, 
			// 			opacity $elOutDuration*.7 ease-in-out .02s, 
			// 			transform .1s ease-in-out;
			// 	}
			// 	&:nth-child(2n+1) {
			// 		left: rem(-140);
			// 		transition: 
			// 			left $elOutDuration*.8 ease-in-out .035s, 
			// 			opacity $elOutDuration*.8 ease-in-out .035s, 
			// 			transform .1s ease-in-out;
			// 	}
			// }
		}

		&.active {
			display: flex;
			// max-height: rem(1000);
			// transition: 
			// 	max-height $nextContainerChangeDuration ease-in-out $containerWaitDuration;

			// .coursePreview__card-item {
			// 	opacity: 1;
			// 	left: 0;
			// 	transition: 
			// 		left $elOutDuration ease-in-out $nextElWaitDuration,
			// 		opacity $elOutDuration ease-in-out $nextElWaitDuration,
			// 		transform .1s ease-in-out;

			// 	&:nth-child(2n) {
			// 		transition: 
			// 			left $elOutDuration*.9 ease-out $nextElWaitDuration*1.03,
			// 			opacity $elOutDuration*.9 ease-in-out $nextElWaitDuration*1.03,
			// 			transform .1s ease-in-out;
			// 	}

			// 	&:nth-child(3n) {
			// 		transition: 
			// 			left $elOutDuration*.8 ease-out $nextElWaitDuration*1.02,
			// 			opacity $elOutDuration*.8 ease-in-out $nextElWaitDuration*1.02,
			// 			transform .1s ease-in-out;
			// 	}

			// 	&:nth-child(4n) {
			// 		transition: 
			// 			left $elOutDuration*.7 ease-out $nextElWaitDuration*1.01,
			// 			opacity $elOutDuration*.7 ease-in-out $nextElWaitDuration*1.01,
			// 			transform .1s ease-in-out;
			// 	}

			// 	&:nth-child(2n+1) {
			// 		transition: 
			// 			left $elOutDuration*.8 ease-out $nextElWaitDuration*1.025,
			// 			opacity $elOutDuration*.8 ease-in-out $nextElWaitDuration*1.025,
			// 			transform .1s ease-in-out;
			// 	}
			// }

		}

		&:after {
		    position: absolute;
		    width: 8vw;
		    background-color: red;
		    height: 100%;
		    z-index: $course-preview-end-overlay;
		    right: 0;
		    opacity: .5;
			background: -moz-linear-gradient(left, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6-15 */
			background: -webkit-linear-gradient(left, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10-25,Safari5.1-6 */
			background: linear-gradient(to right, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */
		}

		.coursePreview__card-item {
			$card-width: rem(400);
			$card-height: rem(80);

			position: relative;
			color: #FFFFFF;
			background-color: $link;
			border-radius: rem(10);
			box-shadow: 0 2px 20px rgba($link, .25), $shadow_depth_6; //shadow_depth_5
			overflow: hidden;
			position: relative;
			width: 100%;
			max-width: $card-width;
			min-height: $card-height;
			max-height: $card-height;
			margin: rem(5) rem(15);
			padding-left: rem(20);
			padding-right: rem(40);
			display: flex;
			align-items: center;

			&:not(li) {
				padding: rem(30);
				text-align: center;

				.coursePreview__card-item-title {
					transition: transform .1s ease-in-out;
					width: 100%;
				}

				&:hover {
					transform: scale(1.01);
					transition: transform .1s ease-in-out;

					.coursePreview__card-item-title {
						transform: scale(1.1);
						transition: transform .1s ease-in-out;
					}
				}
			}

			&:hover {
				// if you want the icon to do some fun animation on hover
			}

			// Generate course color classes
			@each $course-name, $course-color in $course-color-map {
				&.#{$course-name} {
					background-color: $course-color;
					box-shadow: 0 2px 20px rgba($course-color, .25), $shadow_depth_6; //shadow_depth_5
				}
			}

			.coursePreview__card-item-visual {
				text-align: center;
				position: absolute;
				height: rem(140);
				right: rem(-20);
				top: rem(-8);
				opacity: .25;

				img {
					height: 100%;
					width: auto;
				}
			}

			.coursePreview__card-item-title {
				@include title-small;
				line-height: 1.1;
				text-shadow: 0px 1px 2px rgba(black, .3);
				color: #FFFFFF;;
			}
		}
	}


	.tabBar__actions {
		display: none;
	}

	.coursePreview__mobile-actions {
    	display: flex;
    	justify-content: center;
		margin-top: rem(40);
	}

	[data-additional-target] {
		display: none;

		&.active {
			display: block;
		}
	}
}

@media only screen and (min-width: $s-viewport) {
	.coursePreview {
		.coursePreview__card-list {
			.coursePreview__card-item {
				$card-width: rem(310);
				$card-height: rem(100);

				min-width: $card-width;
				max-width: $card-width;
				min-height: $card-height;
				max-height: $card-height;
				margin: rem(15);
				padding-left: rem(30);
				padding-right: rem(60);
			}
		}
	}
}