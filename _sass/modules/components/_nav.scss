$nav-padding: rem(20);

.mainNav {
	position: fixed;
	width: 100%;
	height: $nav-height;
	z-index: $nav-index;
	padding: 0 $container-spacing;
	color: #FFFFFF;
	background-color: $nav-background-color;
	transition: all .1s ease-in-out;

	&.mobile--open {
		background-color: #FFFFFF;

		.mainNav__mobile-toggle {
			color: $link;
		}
	}

	header {
		display: flex;
		height: 100%;
		align-items: center;
		display: flex;
		flex-direction: row;

		.mainNav__logo {
    		align-items: center;
    		display: flex;

    		img {
				max-height: $nav-height;
				height: rem(35);
    		}
		}

		.mainNav__mobile-toggle {
			align-items: center;
			display: flex;
			margin-left: auto;
			position: relative;
			height: $nav-height;

			.toggle--close,
			.toggle--open {
				position: absolute;
				right: 0;
				display: flex;
			    font-size: rem(25);
			    text-align: center;
			    min-width: rem(20);
			    opacity: 0;
			    pointer-events: none;
			    transition: opacity .1s ease-in-out;
			    line-height: $nav-height;

				&.active {
			    	opacity: 1;
			    	cursor: pointer;
			    	pointer-events: all;
				}
			}
		}

		nav {
			display: none;
			position: fixed;
			background-color: $nav-background-color;
			width: 100%;
		    left: 0;
		    right: 0;
		    bottom: 0;
		    top: $nav-height;
		    border-top: 1px solid rgba(white, .25);
			flex-direction: column;
			overflow-y: scroll;

		    &.active {
		    	display: flex;
		    }

			ul {

				> li {
					padding-left: rem(20);
				}

				li {	
					font-size: rem(15);
					margin-left: 0;
					margin-right: 0;
					border-bottom: 1px solid rgba(white, .2);
					line-height: rem(64);

    				&:hover,
    				&:focus {
    					background-color: rgba(0,0,0,.05);

    					li {
    						background-color: inherit;
    					}
    				}

					a {
						font-size: rem(15);
						display: block;
						color: white;
						line-height: $nav-height/1.25;
					}

					&.nav__dropdown {
						cursor: pointer;
						line-height: $nav-height/1.25;
						display: block;

						i {
							pointer-events: none;
							margin-left: rem(10);
						}

						&.active {
    						background-color: rgba(0,0,0,.05);

	    					ul {
	    						opacity: 1;
	    						left: initial;
	    						height: auto;
	    						transition: opacity .2s ease-in-out;
	    						pointer-events: initial;
	    						border-top: 1px solid rgba(white, .2);
	    					}
						}

						// &:after {
						// 	content: "\f0d7";
						// 	font-family: "Font Awesome 5 Free";
						// 	font-weight: 900;
						// 	padding-right: rem(15);
						// 	margin-left: rem(10);
						// 	opacity: .6;
						//     position: absolute;
						//     right: rem(15);
						//     top: 0;
						// }
					}

					ul {
						padding-left: rem(20);
	    				background-color: $nav-background-color;
    					display: flex;
    					flex-direction: column;
    					opacity: 0;
    					padding-left: 0;
    					flex: 1;
    					height: 0;
    					pointer-events: none;
						margin-left: rem(-20);

						.nav__subitem-group-title {
	    					@include fancy-title-sm;
						}


	    				li {
							padding-left: rem(40);

		    				&:hover,
		    				&:focus {
		    					background-color: rgba(0,0,0,.05);
		    				}

	    					a {
	    						display: flex;
	    						padding: rem(20);

    							.nav__subitem-visual {
    								height: rem(50);
    								max-width: rem(50);
    								min-width: rem(50);
    								background-color: $link;
    								overflow: hidden;
    								border-radius: 50%;
	    							margin-right: rem(30);
	    							position: relative;
    								margin-left: rem(-30);

	    							img {
									    max-height: 100%;
									    width: 70%;
									    margin: auto;
									    top: 0;
									    left: 0;
									    right: 0;
									    bottom: 0;
									    position: absolute;
	    							}
    							}

	    						.nav__subitem-info-container {
	    							pointer-events: none;

	    							.nav__subitem-title {
	    								@include title-xs;
	    								font-weight: bold;
	    								line-height: initial;
	    								margin-bottom: rem(10);	
	    							}

	    							.nav__subitem-description {
	    								line-height: initial;	
	    							}
    							}
	    					}
	    				}
					}
				}

				&.mainNav__nav {
					display: block;
				}

				&.mainNav__account {
					display: flex;
					flex-direction: column;
					margin-left: 0;

					.button--sign-up {
						display: inline-block;
					    border: 0px solid transparent;
					    padding: 0 rem(15);
					    color: $link;
					    line-height: rem(40);
					}
				}
			}

		}
	}

    @media only screen and (min-width: $m-viewport) {
   		&.mobile--open {
   			background-color: $link;
   		}

    	header {
			.mainNav__mobile-toggle {
				display: none;
			}

			.mainNav__logo {
    			height: 100%;
			}

	    	nav {
	    		display: flex;
	    		flex-direction: row;
	    		position: initial;
	    		left: initial;
	    		top: initial;
	    		right: initial;
	    		width: auto;
	    		border-top: 0px solid transparent;
		    	margin-left: auto;
		    	height: 100%;

	    		ul {

	    			> li {

	    				&.sign-up {
	    					&:hover {
	    						background-color: transparent;
	    					}
	    				}
	    			}

	    			li {
						line-height: $nav-height;
						margin-left: rem(0);
						margin-right: rem(0);
						padding: 0 rem(15);

						&.nav__dropdown {
							line-height: $nav-height;

							&.active {
								background-color: rgba(0,0,0,.05);
							}

							// &:after {
							// 	margin-right: 0;
							// 	padding-right: 0;
							// }
						}

	    				a {
							line-height: $nav-height;
	    				}

						&:hover,
						&:focus,
						.active {
	    					ul {
	    						opacity: 1;
	    						left: initial;
	    						transition: opacity .2s ease-in-out;
	    						height: auto;
	    					}
						}

	    				ul {
	    					position: absolute;
	    					background-color: #FFFFFF;
	    					border-bottom-left-radius: 5px;
	    					border-bottom-right-radius: 5px;
	    					box-shadow: $shadow_depth_5;
	    					color: $text_grey;
	    					flex: 1;
	    					max-width: rem(800);
	    					margin-left: rem(-15);
	    					left: 100vw;
    						flex-direction: row;
	    					pointer-events: initial;
							top: $nav-height;


	    					> * {
	    						padding: rem(40);

	    						&:not(:first-child) {
	    							border-left: 1px solid $iron-grey;
	    						}
	    					}

	    					li {
	    						padding: 0;
	    						margin: 0;

    							&:last-child {
    								a {
    									margin-bottom: 0;
    								}
    							}

	    						a {
	    							margin-bottom: rem(35);

		    						.nav__subitem-info-container {
		    							.nav__subitem-title {
		    								color: $text_grey;	
		    							}

		    							.nav__subitem-description {
		    								color: $oslo-grey;
		    							}
	    							}

	    							&:hover {
			    						.nav__subitem-info-container {
			    							.nav__subitem-title {
			    								color: $link;	
			    							}

			    							.nav__subitem-description {
			    								color: $link;
			    							}
		    							}
	    							}
	    						}
	    					}
	    				}
	    			}

		    		&.mainNav__nav {
		    			display: flex;
		    			flex-direction: row;
		    			align-items: center;
		    		}

		    		&.mainNav__account {
		    			flex-direction: row;
		    			margin-left: rem(40);
		    			align-items: center;

		    			li {
		    				a {
		    					white-space: nowrap;
		    				}
		    			}

						// .mainNav__account-mobile-toggle {
						// 	display: none;
						// }

		    			.button--sign-up {
		    				display: block;
		    			}
		    		}
	    		}
	    	}
    	}
    }

}